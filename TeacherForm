import React, { useState, useEffect } from "react";
import { useNavigate } from 'react-router-dom';
import Navbar from './Navbar';
import Footer from './Footer';

const TeacherForm = ({
  addOrEditTeacher,
  currentId,
  teacherObjects = {},
  onEditTeacher,
  onDeleteTeacher
}) => {
  const initializedFieldValues = {
    name: '',
    department: '',
    schedule: '',
    marks: '',
    assignmentDetails: '',
    document: ''
  };

  const [values, setValues] = useState(initializedFieldValues);
  const navigate = useNavigate();

  useEffect(() => {
    if (currentId === "" || !teacherObjects[currentId]) {
      setValues(initializedFieldValues);
    } else {
      setValues(teacherObjects[currentId]);
    }
  }, [currentId, teacherObjects]);

  const handleChange = (event) => {
    const { name, value } = event.target;
    setValues({
      ...values,
      [name]: value
    });
    const handleFileChange = (event) => {
    const { name, files } = event.target;
    setValues({
      ...values,
      [name]: files[0] 
    });
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    addOrEditTeacher(values);
    setValues(initializedFieldValues);
    navigate('/TeacherForm');
  };

  return (
    <div className="teacher-form-container">
      <Navbar />
      <h1>{currentId ? 'Edit Teacher Details' : 'Add Teacher Details'}</h1>
      <form onSubmit={handleSubmit}>
        <div className="form-field">
          <label htmlFor="name">Teacher Name:</label>
          <input
            type="text"
            id="name"
            name="name"
            value={values.name}
            onChange={handleChange}
            placeholder="Enter teacher name"
            required
          />
        </div>
